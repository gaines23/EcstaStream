{% extends "app/layout.html" %}

{% block maincontent %}
{% load static %}

<head>
    <link rel="stylesheet" type="text/css" href="{% static 'content\users\profilePage.css' %}">
</head>

<div class="Posts">
    {% for post in user.posts.all %}
        <div class="PostContent">
            {{ post.body }}
            <span class="DateCreated">({{ post.created_at }})</span>
        </div>
    {% endfor %}
</div>



<div class="SocialTab">

    <div class="SocialContent">

        <div class="col-md-3 FriendSection" id="friends">

            <div class="Followers">
                <h3>Followers</h3>
                {{profid.followed_by.all.count}}
            </div>

            <div class="Following">
                <h3>Following</h3>
                {{profid.follows.all.count}}
            </div>

            {% for follow_request in request_to_follow %}
                <h3>
                    {{follow_request.from_user}}
                    <a href="/accept-follow-request/{{follow_request.id}}/">
                        accept follower request
                    </a>
                </h3>
            {% endfor %}
            
            <div class="Search-Wrapper">
                <div class="Input-Wrapper">
                    <input type="text" id="searchInput" onkeyup="searchFriends()" class="Search-Input" placeholder="Search..." />
                </div>
            </div>
                            
            <span class="container">
                <div id="cards-container">
                    <div class="cards" id="cards">
                        {% for follow in follow_list %}
                            <div class="cardInfo" id="cardinfo">
                                <div class="card">
                                    <a href="{% url 'friends-profile' follow.user.id follow.user.username %}">
                                        <div class="info-container">
                                            <img class="rounded-circle account-img" src="{{ friend.user.profpic.url }} " height="50px" width="50px" style="cursor: pointer;"/>
                                            <h4 id="username">@{{ follow.user.username }}</h4>
                                            <h4 id="name">{{ follow.user.first_name }} {{follow.user.last_name}}</h4>
                                        </div>
                                    </a>

                                   <div class="FollowButtons">
                                    {% if follow in user.profile.follows.all %}
                                        <p>Following</p>
                                        <a href="{% url 'unfollow' follow.user.id follow.user.username %}" class="UnFollow">Unfollow</a>
                                    {% else %}
                                        <a href="{% url 'send-follow-request' follow.user.id %}" class="Follow">Follow</a>
                                    {% endif %}
                                    </div>
                                </div>           
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </span>
        </div>
    </div>

</div>






<!--

<div class="col-4 ProfileForm">

    <div class="ProfPic" id="profpic">
        <img class="rounded-circle account-img" src="{{ user.profile.profpic.url }} " height="50px" width="50px" style="cursor: pointer;"/>
    </div>

    {% if user_form.errors %}
        <div class="alert alert-danger alert-dismissible" role="alert">
            <div id="form_errors">
                {% for key, value in user_form.errors.items %}
                    <strong>{{ value }}</strong>
                {% endfor %}
            </div>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endif %}

    <div class="form-content">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            {{ user_form }}

            {{ profile_form }}

            <br><br>
            
            <div class="EditDelete">
                <input type="submit" name="edit" id="EditEmpButton" value="Update">

                <input type="submit" name="delete" id="deleteEmpButton" value="Delete">    
            </div>
        </form>
    </div>

</div>








                        {% for follow in follow_list %}
                            <div class="cardInfo" id="cardinfo">
                                <div class="card">
                                    <a href="{% url 'friends-profile' follow.user.id follow.user.username %}">
                                        <div class="info-container">
                                            <img class="rounded-circle account-img" src="{{ friend.user.profpic.url }} " height="50px" width="50px" style="cursor: pointer;"/>
                                            <h4 id="username">@{{ follow.user.username }}</h4>
                                            <h4 id="name">{{ follow.user.first_name }} {{follow.user.last_name}}</h4>
                                        </div>
                                    </a>
                                </div>
                            </div>           
                        {% endfor %}    
                    </div>
                </div>
            </span>

            <div class="FollowerList">
                <div id="cards-container">
                    <div class="cards" id="cards">
                        {% for follow in profid.followed_by.all %}
                            <div class="cardInfo" id="cardinfo">
                                <div class="card">
                                    <a href="{% url 'friends-profile' follow.user.id follow.user.username %}">
                                        <div class="info-container">
                                            <img class="rounded-circle account-img" src="{{ friend.user.profpic.url }} " height="50px" width="50px" style="cursor: pointer;"/>
                                            <h4 id="username">@{{ follow.user.username }}</h4>
                                            <h4 id="name">{{ follow.user.first_name }} {{follow.user.last_name}}</h4>
                                        </div>
                                    </a>
                                </div>           
                            </div>
                        {% endfor %}

-->




<script src="{% static 'scripts\profile.js' %}"></script>

{% endblock %}