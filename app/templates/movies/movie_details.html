{% extends "app/layout.html" %}

{% block maincontent %}
{% load static %}

<head>
    <link rel="stylesheet" type="text/css" href="{% static 'content\movies\movie-details.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'content\movies\cast-slider.css' %}">
</head>

<div class="row TopInfoBar">
    <div class="MovieInfo">
        <h1 id="title">{{ movobj.title }}</h1>
        <!-- Figure out Liking system: Boolean or 1-5 Stars? -->
        <p> 
            <div id="year">{{ movobj.release_date|slice:4 }}</div>

            <div id="rating"> 
                {{ r.Rated }}
            </div>

            <div id="genre">
                {% for g in movobj.genres %}
                    {{ g.name }} |  
                {% endfor %}
            </div>

            <div id="bookmark">
                <i class="far fa-plus-square"> </i>
            </div>
        </p>
    </div>

    <div class="ReviewScores">
        <div class="Ratings">
            {% for rating in r.Ratings %}
                    {% if rating.Source == 'Internet Movie Database' %}
                        <p>
                            <img id="imbdLogo" alt="imbdLogo" src="{% static 'images\logos\Imdb.png' %}" style="height: 20px; width: 30px">
                            {{ rating.Value }}
                        </p>
                    {% endif %}

                    {% if rating.Source == 'Rotten Tomatoes' %} 
                        <p>
                            <img id="imbdLogo" alt="imbdLogo" src="{% static 'images\logos\RT.svg.png' %}" style="height: 35px; width: 30px">
                            {{ rating.Value }}
                        </p>
                    {% endif %}

                    {% if rating.Source == 'Metacritic' %}
                        <p>
                            <img id="imbdLogo" alt="imbdLogo" src="{% static 'images\logos\index.png' %}" style="height:35px; width: 30px;">
                            {{ rating.Value }}
                        </p>
                    {% endif %}
            {% endfor %}
        </div>

<!-- ADD USER RATINGS AND STUFF UNDER: AUTH_REQUIRED -->


    </div>

</div>




<div class="row MainSection">

    <div class="col-4 PosterInfo">

            <img id="moviePoster" src="https://image.tmdb.org/t/p/original/{{ movobj.poster_path }}">
            <br>

            <div class="Info">
                <div id="dir">
                    <p id="title">Director(s)</p>
                    {% for d in credits.crew|slice:":3" %}
                        {% if d.known_for_department == 'Directing' %}
                            {{ d.name }} <br>
                        {% endif %}
                    {% endfor %}               
                </div>

                <div id="writers">
                    <p id="title">Screenplay</p>
                    {% for s in credits.crew %}
                        {% if s.known_for_department == 'Writing' %}
                            {{ s.name }} <br>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>


    </div>


    <div class="col-8 SummaryStreaming">

        <div class="Summary">
            <h2>Synopsis</h2>
            <div id="text">
                {{ movobj.overview }}
            </div>
        </div>

        <div class="StreamingServices">
<!--            <div class="Title">
                <h2>Where to Watch</h2>
            </div>
-->

            <ul>

                <li>
                    <div class="section-title">
                        <h2>Trailer</h2>
                    </div>
                    <div class="section-content">
                        <iframe width="1403" height="788" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </li>

                <li class="active" id="streaming">

                    <div class="section-title">
                        <h2>Streaming</h2>
                    </div>

                    <div class="section-content">
                        <div class="StreamingList">

                            <div class="List-Cat">
                                <div class="Free-Streaming">
                                    <h3>Free</h3>
                                    {% for free in us_streaming.flatrate %}
                                        {% if free.display_priority <= 11 %}
                                            <img id="moviePoster" src="https://image.tmdb.org/t/p/original/{{ free.logo_path }}">
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div class="Rent-Streaming">
                                    <h3>Rent</h3>
                                    {% for rent in us_streaming.rent %}
                                        {% if rent.display_priority <= 11 %}
                                            <img id="moviePoster" src="https://image.tmdb.org/t/p/original/{{ rent.logo_path }}">
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div class="Buy-Streaming">
                                    <h3>Purchase</h3>
                                    {% for buy in us_streaming.buy %}
                                        {% if buy.display_priority <= 11 %}
                                            <img id="moviePoster" src="https://image.tmdb.org/t/p/original/{{ buy.logo_path }}">
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>    

                        </div>
                    </div>
                </li>

            </ul>

        </div>
    </div>

</div>



<div class="row Cast">

    <div class="Search">
        <p>Cast & Crew</p>
        
        <div class="search-wrapper">
            <div class="input-holder">
                <input type="text" class="search-input" placeholder="Search..." />
                <button class="search-icon" onclick="searchToggle(this, event);">
                    <i class="fas fa-search" style="font-size: 25px; color: #f97c32"></i>
                </button>
            </div>
            <span class="close" onclick="searchToggle(this, event);"></span>
        </div>

    </div>

  <div class="container">

    <div id="slide-left-container">
      <div class="slide-left">
      </div>
    </div>

    <div id="cards-container">
    
      <div class="cards">
        {% for acting in credits.cast %}
            {% if acting.known_for_department == 'Acting' %}

            <div class="card">
              <img id="moviePoster" src="https://image.tmdb.org/t/p/original/{{ acting.profile_path }}" style="width:100%; height: 185px;">
              <div class="container">
                <h4>
                  <b style="font-size: 22px">{{ acting.name }}</b>
                  <i style="font-size: 18px">{{ acting.character }}</i>
                </h4>
              </div>
            </div>

            {% endif %}
        {% endfor %}
      </div>

        
    </div>

    <div id="slide-right-container">
      <div class="slide-right">
      </div>
    </div>


  </div>


</div>



<div class="SeriesInfo">

    <div class="col-3 SeriesSummary">        
            <div class="title"><p>{{ seriesid.name }}</p></div>
    </div>

    <div class="col-9 SeriesContent">
        <div class="gallery-wrap">
            {% for s in seriesid.parts %}
                <div class="item" style="background-image: url(https://image.tmdb.org/t/p/original/{{ s.backdrop_path }}); background-position: center; background-size: cover;-">
                    <h2>{{ s.title }}</h2>
                    <div id="summary">
                        <p>{{ s.overview }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>

    </div>

</div>





<div class="Similar">

</div>






<script src="{% static 'scripts\moviedetails.js' %}"></script>



{% endblock %}